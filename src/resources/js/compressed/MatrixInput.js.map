{"version":3,"sources":["../MatrixInput.js"],"names":["$","Craft","MatrixInput","Garnish","Base","extend","id","blockTypes","blockTypesByHandle","inputNamePrefix","inputIdPrefix","maxBlocks","showingAddBlockMenu","addBlockBtnGroupWidth","addBlockBtnContainerWidth","$container","$blockContainer","$addBlockBtnContainer","$addBlockBtnGroup","$addBlockBtnGroupBtns","blockSort","blockSelect","totalNewBlocks","init","this","formatInputId","children","$addBlockMenuBtn","setNewBlockBtn","i","length","blockType","handle","$blocks","collapsedBlocks","getCollapsedBlockIds","DragSort","axis","filter","proxy","$targetItem","hasClass","getSelectedItems","collapseDraggees","magnetStrength","helperLagBase","helperOpacity","onSortChange","resetItemOrder","Select","multi","vertical","checkboxMode","$block","data","newMatch","match","parseInt","block","MatrixBlock","inArray","collapse","addListener","ev","type","target","addBlock","MenuBtn","onOptionSelect","option","updateAddBlockBtn","$doc","ready","width","addClass","removeClass","navigator","userAgent","indexOf","requestAnimationFrame","css","canAddMoreBlocks","$insertBefore","html","getBlockTypeByHandle","name","t","insertBefore","appendTo","$fieldsContainer","bodyHtml","getParsedBlockHtml","footHtml","getHiddenBlockCss","velocity","opacity","margin-bottom","$bod","append","initUiElements","addItems","scrollContainerToElement","collapseSelectedBlocks","callOnSelectedBlocks","expandSelectedBlocks","disableSelectedBlocks","enableSelectedBlocks","deleteSelectedBlocks","fn","$selectedItems","eq","marginBottom","outerHeight","replace","collapsedBlockStorageKey","siteUid","localStorage","filterArray","split","setCollapsedBlockIds","ids","join","rememberCollapsedBlockId","Storage","push","forgetCollapsedBlockId","collapsedBlocksIndex","splice","matrix","$titlebar","$previewContainer","$actionMenu","$collapsedInput","isNew","collapsed","substr","$menuBtn","find","menuBtn","menu","settings","hasAttr","preventDefault","toggle","expand","animate","previewHtml","$fields","$field","$inputs","inputPreviewText","j","value","$input","$maybeLightswitchContainer","parent","text","getText","getInputPostVal","Array","trim","duration","height","show","hide","setTimeout","val","collapsedContainerHeight","expandedContainerHeight","disable","enable","onMenuOptionSelect","batchAction","totalSelected","isSelected","$option","confirm","selfDestruct","remove","jQuery"],"mappings":"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","file":"MatrixInput.js"}