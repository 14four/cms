{"version":3,"sources":["../RichTextInput.js"],"names":["$","Craft","RichTextInput","Garnish","Base","extend","id","entrySources","categorySources","assetSources","elementLocale","redactorConfig","$textarea","redactor","init","direction","redactorLang","this","lang","imageUpload","fileUpload","plugins","buttons","index","inArray","splice","unshift","lowestListButtonIndex","oldListButtons","i","length","callbacks","handleRedactorInit","mergeCallbacks","initRedactor","livePreview","on","proxy","core","destroy","callback1","callback2","apply","arguments","currentInstance","onInitRedactor","opts","toolbar","customizeToolbar","leaveFullscreetOnSaveShortcut","editor","toolbarFixed","scrollPageOnReady","$doc","trigger","$imageBtn","replaceRedactorButton","get","$fileBtn","button","addCallback","remove","$linkBtn","dropdownOptions","link_entry","title","t","func","link_category","link","observe","element","in","out","unlink","attr","class","aria-disabled","addDropdown","onImageButtonClick","selection","save","assetSelectionModal","createElementSelectorModal","storageKey","multiSelect","criteria","locale","kind","onSelect","assets","transform","restore","asset","url","insert","node","code","sync","images","closeOtherModals","canSelectImageTransforms","show","onFileButtonClick","assetLinkSelectionModal","text","label","onLinkToEntryButtonClick","entrySelectionModal","sources","entries","entry","onLinkToCategoryButtonClick","categorySelectionModal","categories","category","onEditorFocus","box","addClass","onEditorBlur","removeClass","fullscreen","disable","cp","isOpen","key","placeholderKey","addAfter","$btn","jQuery"],"mappings":"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","file":"RichTextInput.js"}