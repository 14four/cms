!function(a){var b=a(".s3-key-id"),c=a(".s3-secret-key"),d=a(".s3-bucket-select > select"),e=a(".s3-refresh-buckets"),f=e.parent().next().children(),g=a(".s3-url-prefix"),h=a(".s3-bucket-location"),i=!1;e.click(function(){if(!e.hasClass("disabled")){e.addClass("disabled"),f.removeClass("hidden");var a={keyId:b.val(),secret:c.val()};Craft.postActionRequest("assetSources/getS3Buckets",a,function(a,b){if(e.removeClass("disabled"),f.addClass("hidden"),"success"==b)if(a.error)alert(a.error);else if(a.length>0){var c=d.val(),g=!1;i=!0,d.prop("disabled",!1).empty();for(var h=0;h<a.length;h++)a[h].bucket==c&&(g=!0),d.append('<option value="'+a[h].bucket+'" data-url-prefix="'+a[h].url_prefix+'" data-location="'+a[h].location+'">'+a[h].bucket+"</option>");g&&d.val(c),i=!1,g||d.trigger("change")}})}}),d.change(function(){if(!i){var a=d.children("option:selected");g.val(a.data("url-prefix")),h.val(a.data("location"))}});var j=a(".rackspace-username"),k=a(".racskspace-api-key"),l=a(".rackspace-region-select > select"),m=a(".rackspace-refresh-regions"),n=m.parent().next().children(),o=a(".rackspace-container-select > select"),p=a(".rackspace-refresh-containers"),q=p.parent().next().children(),r=a(".rackspace-url-prefix"),s=!1;m.click(function(){if(!m.hasClass("disabled")){m.addClass("disabled"),n.removeClass("hidden");var a={username:j.val(),apiKey:k.val()};Craft.postActionRequest("assetSources/getRackspaceRegions",a,function(a,b){if(m.removeClass("disabled"),n.addClass("hidden"),"success"==b)if(a.error)alert(a.error);else if(a.length>0){var c=l.val(),d=!1;l.prop("disabled",!1).empty();for(var e=0;e<a.length;e++)a[e]==c&&(d=!0),l.append('<option value="'+a[e]+'">'+a[e]+"</option>");d&&l.val(c)}})}}),p.click(function(){if("-"==l.val())return void alert(Craft.t("Select a region first!"));if(!p.hasClass("disabled")){p.addClass("disabled"),q.removeClass("hidden");var a={username:j.val(),apiKey:k.val(),region:l.val()};Craft.postActionRequest("assetSources/getRackspaceContainers",a,function(a,b){if(p.removeClass("disabled"),q.addClass("hidden"),"success"==b)if(a.error)alert(a.error);else if(a.length>0){var c=o.val(),d=!1;s=!0,o.prop("disabled",!1).empty();for(var e=0;e<a.length;e++)a[e].container==c&&(d=!0),o.append('<option value="'+a[e].container+'" data-urlprefix="'+a[e].urlPrefix+'">'+a[e].container+"</option>");d&&o.val(c),s=!1,d||o.trigger("change")}})}}),o.change(function(){if(!s){var a=o.children("option:selected");r.val(a.data("urlprefix"))}});var t=a(".google-key-id"),u=a(".google-secret-key"),v=a(".google-bucket-select > select"),w=a(".google-refresh-buckets"),x=w.parent().next().children(),y=a(".google-url-prefix"),z=!1;w.click(function(){if(!w.hasClass("disabled")){w.addClass("disabled"),x.removeClass("hidden");var a={keyId:t.val(),secret:u.val()};Craft.postActionRequest("assetSources/getGoogleCloudBuckets",a,function(a,b){if(w.removeClass("disabled"),x.addClass("hidden"),"success"==b)if(a.error)alert(a.error);else if(a.length>0){var c=v.val(),d=!1;z=!0,v.prop("disabled",!1).empty();for(var e=0;e<a.length;e++)a[e].bucket==c&&(d=!0),v.append('<option value="'+a[e].bucket+'" data-url-prefix="'+a[e].url_prefix+'">'+a[e].bucket+"</option>");d&&v.val(c),z=!1,d||v.trigger("change")}})}}),v.change(function(){if(!z){var a=v.children("option:selected");y.val(a.data("url-prefix"))}});var A=function(){var b=a(this).parents(".field"),c=b.find(".expires-amount").val(),d=b.find(".expires-period select").val(),e=0==parseInt(c,10)||0==d.length?"":c+d;b.find("[type=hidden]").val(e)};a(".expires-amount").keyup(A).change(A),a(".expires-period select").change(A)}(jQuery);
//# sourceMappingURL=asseteditsourcesettings.js.map