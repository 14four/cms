{% import "_includes/forms" as forms %}

{{ forms.checkboxField({
	label: "Restrict uploads to a single folder?"|t,
	id: 'useSingleFolder-toggle',
	name: 'useSingleFolder',
	class: 'use-single-folder-cb',
	value: 1,
	checked: settings.useSingleFolder,
	toggle: 'single-folder-settings',
	reverseToggle: 'multi-folder-settings'
}) }}

<div id="multi-folder-settings"{% if settings.useSingleFolder %} class="hidden"{% endif %}>
	{% if sources %}
		{{ forms.checkboxSelectField({
			label: "Sources"|t,
			instructions: "Which sources do you want to select {type} from?"|t({ type: type|lower }),
			id: 'sources',
			name: 'sources',
			options: sources,
			values: settings.sources
		})}}
	{% else %}
		{{ forms.field({
			label: (allowMultipleSources ? "Sources"|t : "Source"|t)
		}, '<p class="error">' ~ "No sources exist yet."|t ~ '</p>') }}
	{% endif %}

	{{ forms.textField({
		label: "Upload Location"|t,
		instructions: "This is where files will be placed by default when you drag files directly onto the Assets field, or submit files to the field from the front end. It must start with {folder:x} or {source:x}. If left blank, the first assets source will be used."|t({ type: type|lower }),
		id: 'defaultUploadPath',
		name: 'defaultUploadPath',
		value: settings.defaultUploadPath,
		errors: settings.getErrors('defaultUploadPath')
	}) }}
</div>

<div id="single-folder-settings"{% if not settings.useSingleFolder %} class="hidden"{% endif %}>
	{{ forms.textField({
		label: "Single Folder Path"|t,
		instructions: "This is where files will be placed by default when you drag files directly onto the Assets field, or submit files to the field from the front end. It must start with {folder:x} or {source:x}."|t({ type: type|lower }),
		id: 'singleFolderPath',
		name: 'singleFolderPath',
		value: settings.singleFolderPath,
		errors: settings.getErrors('singleFolderPath')
	}) }}
</div>

{{ forms.textField({
	label: "Limit"|t,
	instructions: "Limit the number of selectable {type}."|t({ type: type|lower }),
	id: 'limit',
	name: 'limit',
	value: settings.limit,
	size: 2,
	errors: settings.getErrors('limit')
}) }}

{{ forms.checkbox({
	label: "Restrict allowed file types?"|t,
	class: 'restrictFiles',
	id: '',
	name: 'restrictFiles',
	value: 1,
	checked: settings.restrictFiles,
	toggle: 'restrict-allowed-types'
})}}

<div id="restrict-allowed-types" {% if not settings.restrictFiles %}class="hidden"{% endif %}>
	{{ forms.checkboxSelectField({
		label: "Select the file types that are allowed"|t,
		id: 'allowedKinds',
		name: 'allowedKinds',
		options: fileKinds,
		values: settings.allowedKinds,
	})}}
</div>
