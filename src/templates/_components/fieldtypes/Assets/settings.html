{% import "_includes/forms" as forms %}

{% if sources %}

	{{
		forms.checkboxField({
		label: "Restrict uploads to a single folder?"|t,
		id: 'useSingleFolder-toggle',
		name: 'useSingleFolder',
		class: 'use-single-folder-cb',
		value: 1,
		checked: settings.useSingleFolder
	}) }}

	<div class="source-selection">
		{% if allowMultipleSources %}
			{{ forms.checkboxSelectField({
				label: "Sources"|t,
				instructions: "Which sources do you want to select {type} from?"|t({ type: type|lower }),
				id: 'sources',
				name: 'sources',
				options: sources,
				values: settings.sources
			})}}
		{% else %}
			{{ forms.selectField({
				label: "Source"|t,
				instructions: "Which source do you want to select {type} from?"|t({ type: type|lower }),
				id: 'source',
				name: 'source',
				options: sources,
				value: settings.source
			}) }}
		{% endif %}
	</div>

	<div class="default-folder">
		{{ forms.textField({
			label: "Upload Location"|t,
			instructions: "This is where files will be placed by default when you drag files directly onto the Assets field, or submit files to the field from the front end. It must start with {folder:x} or {source:x}. If left blank, the first assets source will be used."|t({ type: type|lower }),
			id: 'defaultUploadPath',
			name: 'defaultUploadPath',
			value: settings.defaultUploadPath,
			errors: settings.getErrors('defaultUploadPath')
		}) }}
	</div>

	<div class="single-folder">
		{{ forms.textField({
			label: "Single Folder Path"|t,
			instructions: "This is where files will be placed by default when you drag files directly onto the Assets field, or submit files to the field from the front end. It must start with {folder:x} or {source:x}."|t({ type: type|lower }),
			id: 'singleFolderPath',
			name: 'singleFolderPath',
			value: settings.singleFolderPath,
			errors: settings.getErrors('singleFolderPath')
		}) }}
	</div>

	{% set js %}
		displayAssetSettings = function (elem)
		{
			if (elem.prop('checked'))
			{
				$('.source-selection, .default-folder').hide();
				$('.single-folder').show();
			}
			else
			{
				$('.source-selection, .default-folder').show();
				$('.single-folder').hide();
			}
		};

		var element = $('.use-single-folder-cb');

		element.on('click', function (ev) {
			displayAssetSettings($(ev.currentTarget));
 		});

		displayAssetSettings(element);

	{% endset %}

	{% includeJs js %}
{% else %}
	{{ forms.field({
		label: (allowMultipleSources ? "Sources"|t : "Source"|t)
	}, '<p class="error">' ~ "No sources exist yet."|t ~ '</p>') }}
{% endif %}

{% if allowLimit %}
	{{ forms.textField({
		label: "Limit"|t,
		instructions: "Limit the number of selectable {type}."|t({ type: type|lower }),
		id: 'limit',
		name: 'limit',
		value: settings.limit,
		size: 2,
		errors: settings.getErrors('limit')
	}) }}
{% endif %}

