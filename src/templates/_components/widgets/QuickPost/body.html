{% import "_includes/forms" as forms %}


{% if blx.hasPackage('publishpro') %}
	{% set blocks = blx.entryBlocks.entryBlocksBySectionId(settings.section) %}
{% else %}
	{% set blocks = blx.entryBlocks.entryBlocks %}
{% endif %}


<form method="post" action="">
	{{ forms.textField({
		label: "Title"|t,
		id: 'title',
		name: 'title',
		required: true
	}) }}

	{% for block in blocks %}
		{% if block.required or block.id in settings.blocks %}
			{% set blockType = blx.blockTypes.populateBlockType(block) %}
			{% set name = 'block'~block.id %}
			{% set input = blockType.input(name, null) %}

			{{ forms.field({
				label: block.name,
				required: block.required,
				translatable: block.translatable,
				instructions: block.instructions,
				id: block.handle,
			}, input)|ns('blocks')|raw }}
		{% endif %}
	{% endfor %}

	<div class="buttons">
		<input type="submit" class="btn submit" value="{{ 'Post'|t }}">
		<div class="spinner" style="display: none;"></div>
	</div>
</form>
