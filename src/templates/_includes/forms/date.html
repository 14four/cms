{% set id = id ~ '-date' -%}
{% set name = name is defined ? name -%}
{% set value = value is defined ? value -%}

<div class="datewrapper">
	{%- include "_includes/forms/text" with {
		name: (name ? name~'[date]'),
		autocomplete: false,
		size: 10,
		value: (value ? value.localeDate() : '')
	} -%}
	{% if name -%}
		<input type="hidden" name="{{ name }}[timezone]" value="{{ craft.getTimeZone() }}">
	{%- endif -%}
</div>

{%- registerjs %}
	var $datePicker = $('#{{ id|namespaceInputId|e('js') }}');
	$datePicker.datepicker({
		constrainInput: false,
		dateFormat:  Craft.datepickerFormat,
		defaultDate: new Date({% if value %}{{ value.year }}, {{ value.month-1 }}, {{ value.day }}{% endif %}),
		prevText:   '{{ "Prev"|t('app')|e('js') }}',
		nextText:   '{{ "Next"|t('app')|e('js') }}',
		firstDay:   {{ currentUser.getPreference('weekStartDay', 0) }},
	});
{%- endregisterjs %}
