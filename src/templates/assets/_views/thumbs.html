{% set thumbSize = 100 %}
{% set thumbSize2X = 200 %}

<div class="files thumbs">
	<ul>
		{% for file in files %}
			<li class="open-file" data-file="{{ file.id }}" data-url="{{ file.url }}">
                {% if file.kind == 'image' %}
				    <div class="thumb-wrapper wrapper-{{ file.id }}"><div class="thumb thumb-{{ file.id }}"></div></div>
                {% else %}
                    <div class="thumb assets-fileicon"><div class="assets-extension">{{ file.extension }}</div></div>
                {% endif %}
				<div class="filename">{{ file.filename }}</div>
			</li>
		{% endfor %}
	</ul>
</div>

{% set thumbCss = '' %}
{% set hiResThumbCss = '' %}
{% for file in files %}
    {% if file.kind == 'image' %}
        {% if file.width > file.height %}
            {% set thumbWidth = thumbSize %}
            {% set thumbHeight = (thumbSize / file.width) * file.height %}
        {% else %}
            {% set thumbHeight = thumbSize %}
            {% set thumbWidth = (thumbSize / file.height) * file.width %}
        {% endif %}

        {% set topMargin     = (thumbSize - thumbHeight) // 2 %}
        {% set bottomMargin  = thumbSize - thumbHeight - topMargin %}
        {% set leftMargin    = (thumbSize - thumbWidth) // 2 %}
        {% set rightMargin   = thumbSize - thumbWidth - leftMargin %}

        {% set thumbCss      = thumbCss     ~'.thumb-wrapper.wrapper-'~file.id~' { margin: '~topMargin~'px '~rightMargin~'px '~bottomMargin~'px '~leftMargin~"px; }\n" %}
        {% set thumbCss      = thumbCss      ~ '.thumb-'~file.id~' { background-image: url('~file.getThumbUrl(thumbSize)~'); height: '~thumbHeight~'px; width: '~thumbWidth~"px;}\n" %}
        {% set hiResThumbCss = hiResThumbCss ~ '.thumb-'~file.id~' { background-image: url('~file.getThumbUrl(thumbSize2X)~'); background-size: '~thumbWidth~'px '~thumbHeight~"px; }\n" %}
    {% endif %}
{% endfor %}

{% includeCss thumbCss %}
{% includeHiResCss hiResThumbCss %}

{{ getHeadHtml() }}
