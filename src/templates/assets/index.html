{% extends "_layouts/cp" %}
{% set title = "Assets"|t %}
{% includeCssResource "css/assets.css" %}
{% set sources = blx.assets.getAllSources %}
{% set files = blx.assets.getFilesBySourceId(1) %}
{% set view = 'thumbs' %}


{% set header %}
	<h1>{{ title }}</h1>
{% endset %}


{% set content %}
	{% if sources %}
		<nav class="nav">
			<div class="buttons">
				<a href="" class="btn submit" data-icon="↑">{{ "Upload Files"|t }}</a>
			</div>

			<ul>
				{% for source in sources %}
					<li><a href=""{% if loop.first %} class="sel"{% endif %}>{{ source.name }}</a></li>
				{% endfor %}
			</ul>
		</nav>

		<div>
			{% if files %}
				<div class="toolbar">
					<div class="btngroup">
						<a class="btn {% if view == 'thumbs' %}active{% endif %}" href="{{ url('assets') }}" title="{{ 'Display files as thumbnails'|t }}" data-icon="⌗"></a>
						<a class="btn {% if view == 'list' %}active{% endif %}" href="{{ url('assets/list') }}" title="{{ 'Display files in a list'|t }}" data-icon="•"></a>
					</div>

					<div class="textwrapper search"><input type="text" class="text nicetext" data-hint="{{ 'Search assets'|t }}"></div>
				</div>

				{% include 'assets/_views/'~view with { files: files } only %}
			{% else %}
				<div class="toolbar"></div>
				<p class="centeralign">{{ "No files have been uploaded yet."|t }}</p>
			{% endif %}
		</div>
	{% else %}
		<p class="centeralign">
			{{ "No asset sources exist yet."|t }}
			<a class="go" href="{{ url('settings/assets/sources/new') }}">{{ "Create the first one"|t }}</a>
		</p>
	{% endif %}
{% endset %}
