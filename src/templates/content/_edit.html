{% layout "content/_layouts/content" %}

{% if !entry %}
	{% set entry = content.getEntry(entryId) %}
{% endif %}

{% region "pageTitle" %}Editing “{% if entry.title %}{entry.title}{% else %}Untitled{% endif %}”{% endregion %}

{% region "page" %}
	<div class="item field page-head">
		<div class="title editable" tabindex="0">
			<h1 {% if !entry.title %}class="untitled"{% endif %}>{% if entry.title %}{entry.title}{% else %}Untitled{% endif %}</h1>
			<a>Edit</a>
			<input type="hidden" name="title" value="{entry.title}" />
		</div>
		<div class="clear"></div>
		{% if entry.section.has_urls %}
			<div class="url">
				<div class="editable" tabindex="0">
					<div><span class="prefix">{sites.currentSite.url}/</span><span class="slug">{% if entry.slug %}{entry.slug}{% else %}…{% endif %}</span></div>
					<a>Edit</a>
					<input type="hidden" name="slug" value="{entry.slug}" />
				</div>
				<div class="clear"></div>
			</div>
		{% endif %}
	</div>

	{% foreach entry.blocks as block %}
		<div class="item field">
			<label for="{block.handle}-block" {% if block.required %}class="required"{% endif %}>{block.name}</label>
			{% if block.instructions %}
				<p>{block.instructions}</p>
			{% endif %}
			<div class="{block.classHandle}">
				{block.displayField}
			</div>
		</div>
	{% endforeach %}

	<div class="item field page-foot">
		<input class="btn big submit" type="submit" value="Publish" />
	</div>
{% endregion %}

{% region "scripts" %}
	{% include "_includes/js_include" file="edit-entry.js" %}
{% endregion %}
