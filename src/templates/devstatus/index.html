{% layout "_layouts/full" %}
{% region "pageTitle" %}Dev Status{% endregion %}

{% region "styles" %}
<style type="text/css">
	.status { margin: 3px 3px 0 0; }
	h3 .status { margin: 7px 5px 0 0; }
</style>
{% endregion %}

{% region "main" %}

	<table class="pane">
		<thead>
			<tr>
				<th>Component</th>
				<th>Notes</th>
				<th>Status</th>
			</tr>
		</thead>
		<tbody>
			<tr class="head">
				<th colspan="3">System Compontents</th>
			</tr>

			<tr>
				<th><h3><span class="status pending"></span>Routing</h3></th>
				<td><p>Should flow like this:</p>
					<table class="pane" style="width: auto">
						<thead>
							<tr>
								<th width="50%">CP request</th>
								<th>Site request</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td colspan="2"><span class="status on"></span>Check if the first URL segment matches the <code>actionTriggerWord</code></td>
							</tr>
							<tr>
								<td colspan="2"><span class="status on"></span>Check if the first URL segment matches the <code>resourceTriggerWord</code></td>
							</tr>
							<tr>
								<td><span class="status"></span>Check CP routing array (matches “content/edit/{entry_id}”, etc)</td>
								<td><span class="status"></span>Check routes defined in <code>blx_siteroutes</code></td>
							</tr>
							<tr>
								<td></td>
								<td><span class="status"></span>Check for a <code>blx_entries . full_url</code> match</td>
							</tr>
							<tr>
								<td colspan="2"><span class="status on"></span>Check for a template match</td>
							</tr>
							<tr>
								<td colspan="2"><span class="status on"></span>404</td>
							</tr>
						</tbody>
					</table>
					<p><s>Need to write URL generation functions.</s></p>
					<p>URL patterns stored in <code>blx_siteroutes</code> may contain tags representing predefined or custom regex patterns.</p>
				</td>
				<td></td>
			</tr>

			<tr>
				<th><h3><span class="status on"></span>Models</h3></th>
				<td>
					<p>“Atom” is the base abstract model that every other model extends. It consists of <code>id</code>, <code>date_created</code>, <code>date_updated</code>, and <code>uid</code>. The latter 3 will be used by Blocks Pro for server syncing, so it's important that every single table in the DB has them.) Atom will provide triggers so that they get auto-generated.</p>
					<p>Every non-abstract model that extends Atom will get its own table.</p>
					<p>Models should be able to create their own schema.</p>
				</td>
				<td>All done!</td>
			</tr>

			<tr>
				<th><h3><span class="status pending"></span>Installer</h3></th>
				<td><p>Should flow like this:</p>
					<ol>
						<li>Requirements check / status report</li>
						<li>License key check and validation</li>
						<li>Admin account creation</li>
						<li>Site setup wizard in the CP</li>
					</ol>
				</td>
				<td>Current script checks for P&amp;T login. Should be swapped with license key check.</td>
			</tr>

			<tr>
				<th><h3><span class="status pending"></span>Updates</h3></th>
				<td>
					<p>Invalidate Blocks updateInfo cache on successful update</p>
					<p>Develop an alternate, version-based migration mechanism for when Dev Mode is off</p>
				</td>
				<td></td>
			</tr>

			<tr>
				<th><h3><span class="status off"></span>Plugins</h3></th>
				<td>
					<p>A plugin is installed if there is a record in the db.</p>
					<p>A plugin is enabled if its <code>enabled</code> bit in <code>blx_plugins</code> is set to true.</p>
					<p>Plugins can add their own controllers, resources, CP sections, Dashboard widgets, block types, template tags, user permissions, etc. etc.</p>
					<p>Plugins can have global settings.</p>
				</td>
				<td></td>
			</tr>

			<tr>
				<th><h3><span class="status pending"></span>Miscellaneous</h3></th>
				<td>
					<p><s>Any template folder that begins with an underscore should not be directly accessible on the front end.</s></p>
					<p>Matrix code and schema.</p>
					<p>Define environment config profiles (see Fuel).</p>
					<p><s>Disable PathInfo in php.ini and make sure routing, URL generation works with query strings only.</s></p>
					<p>Install YouTrack</p>
					<p>Activity Log service (used by the Recent Activity widget)</p>
					<p>Notification service</p>
				</td>
				<td></td>
			</tr>

			<tr>
				<th><h3><span class="status off"></span>Errors</h3></th>
				<td>
					<p>Error reporting service that catches exceptions and reports them to us</p>
				</td>
				<td></td>
			</tr>

			<tr>
				<th><h3><span class="status pending"></span>Permissions, Roles, and Authentication</h3></th>
				<td>
					<p>Login, session management, roles.</p>
					<p>All permissions are global</p>
				</td>
				<td></td>
			</tr>

			<tr>
				<th><h3><span class="status off"></span>Translations</h3></th>
				<td>
					<p>All language in the CP should come from language files, rather than hard coded</p>
					<p>Look into translation services (e.g. Transifex) for providing 1st party CP translations</p>
				</td>
				<td></td>
			</tr>

			<tr>
				<th><h3><span class="status pending"></span>Security</h3></th>
				<td>
					<p>Fallback encryption depending on environment (bcrypt, md5, etc).</p>
					<p>Security audit (XSS, sql injection, etc.)</p>
				</td>
				<td></td>
			</tr>

			<tr>
				<th><h3><span class="status pending"></span>Performance</h3></th>
				<td>
					<p>Audit caching, attach profiler, db indexes and queries, minify/compress css/js.</p>
				</td>
				<td></td>
			</tr>

			<tr>
				<th><h3><span class="status pending"></span>Intranet and E.T.</h3></th>
				<td>
					<p>Release notes on separate lines?</p>
					<p>Select which files to include in a release and patch.</p>
					<p>Log all API activity into a separate reporting db with schema</p>
				</td>
				<td></td>
			</tr>



			<tr class="head">
				<th colspan="3">CP Sections</th>
			</tr>

			<tr>
				<th><h3><span class="status pending"></span>Dashboard</h3></th>
				<td>
					<p>Widget settings saving</p>
					<p>Ability to add new widgets and customize their order</p>
					<p>Recent Activity widget (relies on the Activity Log service)</p>
					<p>Site Map widget</p>
					<p>Feed widget</p>
				</td>
				<td></td>
			</tr>

			<tr>
				<th><h3><span class="status pending"></span>Content</h3></th>
				<td>
					<p>Section administration</p>
					<p>Site Map</p>
					<p>Recent Entries</p>
					<p>Drafts and versions</p>
				</td>
				<td></td>
			</tr>

			<tr>
				<th><h3><span class="status off"></span>Assets</h3></th>
				<td>
					<p>Copy all functionality from our EE add-on</p>
				</td>
				<td></td>
			</tr>

			<tr>
				<th><h3><span class="status pending"></span>Users</h3></th>
				<td>
					<p>Everything</p>
				</td>
				<td></td>
			</tr>

			<tr>
				<th><h3><span class="status off"></span>Settings</h3></th>
				<td>
					<p>Pretty much everything</p>
				</td>
				<td></td>
			</tr>

			<tr>
				<th><h3><span class="status off"></span>Docs</h3></th>
				<td>
					<p>Everything</p>
				</td>
				<td></td>
			</tr>



			<tr class="head">
				<th colspan="3">Other Tasks</th>
			</tr>

			<tr>
				<th><h3><span class="status off"></span>User Guide</h3></th>
				<td>
					<p>Look into documentation HTML generators (Sphynx, phpDocumentor, doxygen, phpdoc, twintext, apigen).</p>
					<p>Would be great if documentation could live as Textile/Markdown files in docs/ and plugins/*/docs/, and then we could parse and display them right in the CP.</p>
				</td>
				<td></td>
			</tr>

			<tr>
				<th><h3><span class="status pending"></span>Tests</h3></th>
				<td>
					<p>More of them.</p>
					<p>Get phpUnit / xDebug working on *nix</p>
				</td>
				<td></td>
			</tr>

			<tr>
				<th><h3><span class="status off"></span>Licensing</h3></th>
				<td>
					<p>Licensing review by a laywer</p>
					<p>Add license blurb to each file (build server)</p>
				</td>
				<td></td>
			</tr>

			<tr>
				<th><h3><span class="status off"></span>Production</h3></th>
				<td>
					<p>Setup, test, deployment</p>
				</td>
				<td></td>
			</tr>
		</tbody>
	</table>


{% endregion %}
