{% if user.isloggedIn %}
	{% redirect "dashboard" %}
{% endif %}

{% layout "_layouts/basic" pageTitle="Login" %}

{% region "styles" %}
	{% include "_includes/css_include" file="styles/login.css" %}
{% endregion %}

{% region "body" %}
	<script type="text/javascript">
		var cookie = 'BlocksCookieTest='+Math.floor(Math.random() * 1000000);
		document.cookie = cookie;
		var cookiesEnabled = document.cookie.search(cookie) != -1;
		if (cookiesEnabled)
		{
			document.write(
				'<form id="login-form" method="post" action="">' +
					'<div id="login-pane" class="pane">' +
						'<div class="body">' +
							'<div class="item field">' +
								'<label for="username">Username or Email</label>' +
								'<div class="input-wrapper"><input id="username" type="text" value="{user.rememeberedLoginName}" /></div>' +
							'</div>' +
							'<div class="item field">' +
								'<label for="password">Password</label>' +
								' <a id="forgot-password" href="{url.base}{users.forgotPasswordUrl}">(Forget?)</a>' +
								'<div class="input-wrapper password"><input id="password" class="password" type="password" /></div>' +
							'</div>' +
						'</div>' +
					'</div>' +

					'<input id="login-btn" class="btn big submit disabled" type="submit" value="Login" />' +

					'<label id="remember-me-label" class="checkbox">' +
						'<input id="remember-me" type="checkbox" />' +
						' Keep me logged in for {configHelper.getTimeInSeconds(config.rememberMeSessionTimeout).toHumanTimeDuration.wordNumbers}' +
					'</label>' +

					{% if !request.isSecureConnection %}
						'<a id="insecure" title="This is an insecure connection."></a>' +
					{% endif %}
				'</form>'
			);

			var id = {% if user.rememeberedLoginName %}'password'{% else %}'username'{% endif %};
			document.getElementById(id).focus();
		}
		else
		{
			document.write(
				'<div class="no-access">' +
					'<div class="pane">' +
						'<div class="body">' +
							'<div class="item notice">' +
								'<div class="icon"></div>' +
								'<p>Cookies must be enabled to access the Blocks CP.<br>' +
									'<a class="go" href="">See how</a>' +
								'</p>' +
							'</div>' +
						'</div>' +
					'</div>' +
				'</div>'
			);
		}
	</script>
{% endregion %}

{% region "scripts" %}
	{% include "_includes/js_include" file="login.js" %}
{% endregion %}
