{% extends "plugin-store/_layouts/cp" %}

{% import "_includes/forms" as forms %}

{% set title = 'Plugin Store' %}

{% set extraPageHeaderHtml %}
	<div class="buttons secondary-buttons right">
		<a href="{{ url('plugin-store/cart') }}" class="btn">Your Cart</a>
	</div>
{% endset %}

{% set content %}

	{% if not error %}

		{% if plugins.error is defined %}
			{{ plugins.error }}
		{% else %}
			{% if plugins|length > 0 %}

				<div class="toolbar">
					<div class="flex">

						<div class="flex-grow">
							<form method="post">
								<input type="hidden" name="action" value="plugin-store/search">
								{{ csrfInput() }}

								{{ forms.text({
									placeholder: "Search plugins…"|t('app')
								}) }}
							</form>
						</div>

						<div class="btn menubtn">{{ "All"|t('app') }}</div>
						<div class="menu">
							<ul>
								<li><a>{{ "All"|t('app') }}</a></li>
								<li><a>{{ "Free"|t('app') }}</a></li>
								<li><a>{{ "Commercial"|t('app') }}</a></li>
							</ul>
						</div>
						<div class="btn menubtn">{{ "Popularity"|t('app') }}</div>
						<div class="menu">
							<ul>
								<li><a>{{ "Price"|t('app') }}</a></li>
								<li><a>{{ "Popularity"|t('app') }}</a></li>
							</ul>
							<hr>
							<ul>
								<li><a>{{ "Ascending"|t('app') }}</a></li>
								<li><a>{{ "Descending"|t('app') }}</a></li>
							</ul>
						</div>

					</div>
				</div>


				<table class="data fullwidth">
					<thead>
						<tr>
							<th class="thin"></th>
							<th>Plugin Name</th>
							<th class="thin"></th>
						</tr>
					</thead>
					<tbody>
						{% for plugin in plugins %}
							{% if plugin %}
								<tr>
									<td class="thin">
										<a href="{{ url('plugin-store/'~plugin.slug) }}">
											<div class="plugin-icon">
												{% if plugin.iconUrl %}
													<img src="{{ plugin.iconUrl }}" width="32" />
												{% endif %}
											</div>
										</a>
									</td>
									<td><a href="{{ url('plugin-store/'~plugin.slug) }}">{{ plugin.name }}</a> <span class="light">— {{ plugin.description }}</span></td>
									<td><a href="{{ url('plugin-store/cart') }}"
										   class="btn submit">Buy $99.00</a></td>
								</tr>
							{% endif %}
						{% endfor %}
					</tbody>
				</table>
			{% else %}
				<p>{{ 'No plugins'|t('app') }}</p>
			{% endif %}
		{% endif %}
	{% else %}
		<p class="error">{{ error|raw }}</p>
	{% endif %}

{% endset %}
