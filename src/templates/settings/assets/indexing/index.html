{% extends "settings/assets/_layout" %}
{% set page = "indexing" %}
{% set title = "Asset Indexing"|t %}
{% set sources = blx.assets.getAllSources %}

{% includeTranslations
    "The following items were found in the database that do not have a physical match.",
    "Folders",
    "Files",
    "Cancel",
    "Delete"
%}

{% set content %}
	<p id="nosources" {% if sources|length %}style="display: none"{% endif %}>
		{{ "No sources exist yet."|t }}
	</p>

	{% if sources|length %}
		<table id="sources" class="data">
			<thead>
				<th scope="col">{{ "Name"|t }}</th>
				{% if blx.hasPackage('Cloud') %}<th scope="col">{{ "Type"|t }}</th>{% endif %}
				<td class="small"></td>
				<td class="small"></td>
			</thead>
			<tbody>
				{% for source in sources %}
					<tr data-id="{{ source.id }}" data-name="{{ source.name|t }}">
						<th scope="row"><label for="source_{{ source.id }}">{{ source.name|t }}</label></th>
						{% if blx.hasPackage('Cloud') %}<td>{{ blx.assets.populateSourceType(source).name }}</td>{% endif %}
						<td class="small index-progress"></td>
						<td class="small"><input type="checkbox" class="indexing" source_id="{{ source.id }}" id="source_{{ source.id }}"/></td>
					</tr>
				{% endfor %}
			</tbody>
		</table>

        <div class="buttons">
            <a href="javascript:;" class="btn" id="start-index">{{ "Index"|t }}</a>
        </div>
	{% endif %}

{% endset %}


{% includeJsResource "js/Assets/AssetIndexing.js" %}
{% includeJsResource "js/QueueManager.js" %}
