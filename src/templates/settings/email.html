{% layout "settings/_layouts/settings" pageTitle="System Info" %}

{% region "main" %}
	<div id="email-settings" class="pane">
		<div class="head">
			<h5>Email Settings</h5>
		</div>
		<div class="body">

			{% if !emailSettings %}
				{% set emailSettings = email.emailSettings %}
			{% endif %}

			<form method="post" action="">
				<input type="hidden" name="action" value="app/settings/saveemailsettings" />

				<div class="item field">
					<label for="emailerType">Email Type</label>
					<div>
						<select id="emailerType" name="emailerType">
							<option value="PhpMail" {% if emailSettings.emailerType == 'PhpMail' %}selected{% endif %}>PHP Mail</option>
							<option value="Sendmail" {% if emailSettings.emailerType == 'Sendmail' %}selected{% endif %}>Sendmail</option>
							<option value="Smtp" {% if emailSettings.emailerType == 'Smtp' %}selected{% endif %}>SMTP</option>
							<option value="GmailSmtp" {% if emailSettings.emailerType == 'GmailSmtp' %}selected{% endif %}>Gmail SMTP</option>
							<option value="Pop" {% if emailSettings.emailerType == 'Pop' %}selected{% endif %}>POP before SMTP</option>
						</select>
					</div>
				</div>
				<div class="item field">
					<label for="host">Host Name</label>
					<div class="input-wrapper"><input id="host" name="host" type="text" value="{emailSettings.host}" /></div>
					{% if emailSettings.errors.host %}
						{% include "_includes/error_list" errors=emailSettings.errors.host %}
					{% endif %}
				</div>
				<div class="item field">
					<label for="port">Port</label>
					<input id="port" name="port" class="input" type="text" value="{emailSettings.port}" size="5" />
					{% if emailSettings.errors.port %}
						{% include "_includes/error_list" errors=emailSettings.errors.port %}
					{% endif %}
				</div>
				<div class="item field">
					<label for="smtpAuth">Use SMTP Authentication?</label>
					{% include "_includes/switch" name="smtpAuth" on=emailSettings.smtpAuth %}
					{% if emailSettings.errors.smtpAuth %}
						{% include "_includes/error_list" errors=emailSettings.errors.smtpAuth %}
					{% endif %}
				</div>
				<div class="item field">
					<label for="userName">Username</label>
					<div class="input-wrapper"><input id="userName" name="userName" type="text" value="{emailSettings.userName}" /></div>
					{% if emailSettings.errors.userName %}
						{% include "_includes/error_list" errors=emailSettings.errors.userName %}
					{% endif %}
				</div>
				<div class="item field">
					<label for="password">Password</label>
					<div class="input-wrapper"><input id="password" name="password" type="password" value="{emailSettings.password}" /></div>
					{% if emailSettings.errors.password %}
						{% include "_includes/error_list" errors=emailSettings.errors.password %}
					{% endif %}
				</div>
				<div class="item field">
					<label for="smtpKeepAlive">Use SMTP Keep Alive?</label>
					{% include "_includes/switch" name="smtpKeepAlive" on=emailSettings.smtpKeepAlive %}
					{% if emailSettings.errors.smtpKeepAlive %}
						{% include "_includes/error_list" errors=emailSettings.errors.smtpKeepAlive %}
					{% endif %}
				</div>
				<div class="item field">
					<label for="smtpSecureTransport">Use SMTP Secure Transport?</label>
					{% include "_includes/switch" name="smtpSecureTransport" on=emailSettings.smtpSecureTransport %}
					{% if emailSettings.errors.smtpSecureTransport %}
						{% include "_includes/error_list" errors=emailSettings.errors.smtpSecureTransport %}
					{% endif %}
				</div>
				<div class="item field">
					<label for="smtpSecureTransportType">SMTP Secure Transport Type</label>
					{% include "_includes/pill" name="smtpSecureTransportType" options="ssl:SSL,tls:TLS" default="ssl" value=emailSettings.smtpSecureTransportType %}
						{!--<select id="smtpSecureTransportType" name="smtpSecureTransportType">
							<option value="ssl" {% if emailSettings.smtpSecureTransportType == 'Ssl' %}selected{% endif %}>SSL</option>
							<option value="Tls" {% if emailSettings.smtpSecureTransportType == 'Tls' %}selected{% endif %}>TLS</option>
						</select>--}
					{% if emailSettings.errors.smtpSecureTransportType %}
						{% include "_includes/error_list" errors=emailSettings.errors.smtpSecureTransportType %}
					{% endif %}
				</div>
				<div class="item field">
					<label for="timeout">Timeout</label>
					<input id="timeout" name="timeout" class="input" type="text" value="{emailSettings.timeout}" size="5" />
					{% if emailSettings.errors.timeout %}
						{% include "_includes/error_list" errors=emailSettings.errors.timeout %}
					{% endif %}
				</div>
				<div class="item field">
					<label for="fromEmail">Default From Email</label>
					<div class="input-wrapper"><input id="fromEmail" name="fromEmail" type="text" value="{emailSettings.fromEmail}" /></div>
					{% if emailSettings.errors.fromEmail %}
						{% include "_includes/error_list" errors=emailSettings.errors.fromEmail %}
					{% endif %}
				</div>
				<div class="item field">
					<label for="fromName">Default From Name</label>
					<div class="input-wrapper"><input id="fromName" name="fromName" type="text" value="{emailSettings.fromName}" /></div>
					{% if emailSettings.errors.fromName %}
						{% include "_includes/error_list" errors=emailSettings.errors.fromName %}
					{% endif %}
				</div>
				<div class="item">
					<input class="btn big submit" type="submit" value="Save Email Settings" />
				</div>
			</form>
		</div>
	</div>
{% endregion %}

{% region "scripts" %}
	<script type="text/javascript">
		new blx.ui.Switch('#smtpAuth');
		new blx.ui.Switch('#smtpKeepAlive');
		new blx.ui.Switch('#smtpSecureTransport');
		new blx.ui.Pill('#smtpSecureTransportType');
	</script>
{% endregion %}