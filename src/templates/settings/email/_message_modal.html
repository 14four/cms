{% import "_includes/forms" as forms %}
{% set messageId = blx.request.post('messageId') %}
{% set language = blx.request.post('language') %}
{% set message = blx.email.getMessage(messageId) %}
{% set content = blx.email.getMessageContent(messageId, language) %}


<h1>{{ "Edit Message"|t }}</h1>

{% set languages = blx.settings.languages %}
{% if languages|length %}
	<div class="select language">
		<select>
			<option value="{{ blx.language }}" {% if blx.language == content.language %}selected{% endif %}>{{ blx.localization.localeName(blx.language) }}</option>
			{% for language in languages %}
				<option value="{{ language }}" {% if language == content.language %}selected{% endif %}>{{ blx.localization.localeName(language) }}</option>
			{% endfor %}
		</select>
	</div>
{% endif %}

{{ forms.textField({
	label: "Subject"|t,
	id: 'subject',
	class: 'subject',
	value: content.subject,
	required: true
}) }}

{{ forms.textareaField({
	label: "Body"|t,
	id: 'body',
	class: 'body',
	value: content.body,
	rows: 15
}) }}

<div class="buttons">
	<input type="submit" class="btn submit" value="{{ 'Save'|t }}">
	<input type="button" class="btn cancel" value="{{ 'Cancel'|t }}">
</div>
