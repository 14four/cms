{% extends "_layouts/cp" %}
{% import "_includes/forms" as forms %}
{% set title = "General Settings"|t %}
{% set centered = true %}


{% set header %}
	<h1>{{ title }}</h1>
	<ul class="left">
		<li><a href="{{ url('settings') }}" class="backbtn">{{ "Settings"|t }}</a></li>
	</ul>
{% endset %}


{% set content %}
	<form method="post" action="" accept-charset="UTF-8">
		<input type="hidden" name="action" value="systemSettings/saveGeneralSettings">
		<input type="hidden" name="redirect" value="settings">

		{{ forms.textField({
			label: "Site Name"|t,
			id: 'siteName',
			name: 'siteName',
			value: (post is defined ? post.siteName : blx.app.siteName),
			required: true,
			errors: (post is defined ? post.getErrors('siteName') : null)
		}) }}

		{{ forms.textField({
			label: "Site URL"|t,
			id: 'siteUrl',
			name: 'siteUrl',
			value: (post is defined ? post.siteUrl : blx.app.siteUrl),
			required: true,
			errors: (post is defined ? post.getErrors('siteUrl') : null)
		}) }}

		{{ forms.textField({
			label: "License Key"|t,
			id: 'licenseKey',
			class: 'code',
			name: 'licenseKey',
			value: (post is defined ? post.licenseKey : blx.app.licenseKey),
			required: true,
			errors: (post is defined ? post.getErrors('licenseKey') : null)
		}) }}

		{% if blx.hasPackage('Rebrand') %}

            {% incudeTranslations
                "Are you sure you want to delete the logo?"
            %}
            {% includeJsResource "js/global/ui/QQUploader.js" %}
            {% includeJsResource "lib/imgareaselect/jquery.imgareaselect.pack.js" %}
            {% includeJsResource "js/global/ui/ImageUpload.js" %}
            {% includeJsResource "js/rebrand.js" %}
            {% includeCssResource "lib/imgareaselect/imgareaselect-animated.css" %}
            {% includeCssResource "css/rebrand.css" %}

            {% set logoInput %}
                <div class="cp-logo">
                    <div class="current-logo" style="background-image: url({{ blx.rebrand.isLogoUploaded() ? blx.rebrand.logoUrl : resourceUrl('images/blocks.png') }});"></div>
                    <div class="logo-controls">
                        {% if blx.rebrand.isLogoUploaded() %}
                            <div class="btn upload-logo">{{ "Change logo"|t }}</div><br /><br />
                            <div class="btn delete-logo">{{ "Delete logo"|t }}</div>
                        {% else %}
                            <div class="btn upload-logo">{{ "Upload a logo"|t }}</div>
                        {% endif %}
                    </div>
                </div>
            {% endset %}

            {{ forms.field({
                label: "Logo"|t
            }, logoInput) }}

		{% endif %}

		<div class="buttons">
			<input class="btn submit" type="submit" value="{{ 'Save'|t }}">
		</div>
	</form>
{% endset %}
