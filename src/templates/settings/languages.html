{% extends "_layouts/cp" %}
{% set title = "Content Languages"|t %}


{% set titlebar %}
	<h1>{{ title }}</h1>
{% endset %}



{% set content %}
	<form method="post" action="">
		<input type="hidden" name="action" value="settings/saveLanguageSettings">
		<input type="hidden" name="redirect" value="settings">

		<h3>{{ "Which languages will your content be available in?"|t }}</h3>

		<div class="field">
			<div class="checkbox"><label>
				<input type="checkbox" checked disabled>
				{{ blx.localization.localeName(blx.app.language) }} <strong>({{ "Primary"|t }})</strong>
			</label></div>

			{% if not selectedLanguages %}
				{% set selectedLanguages = blx.settings.languages %}
			{% endif %}

			{% for language in selectedLanguages %}
				<div class="checkbox"><label>
					<input type="checkbox" name="languages[]" value="{{ language }}" checked>
					{{ blx.localization.localeName(language) }}
				</label></div>
			{% endfor %}

			<hr>

			{% set languages = blx.localization.languages|without(blx.app.language)|without(selectedLanguages) %}
			{% set totalLanguages = languages|length %}
			{% set languagesPerColumn = ceil(totalLanguages / 3 )%}

			<div class="grid">
				<div class="col col33"><div class="col-inner">
					{% for language in languages %}
						{% if loop.index0 != 0 and loop.index0 % languagesPerColumn == 0 %}
							</div></div><div class="col col33"><div class="col-inner">
						{% endif %}
						<div class="checkbox"><label>
							<input type="checkbox" name="languages[]" value="{{ language }}">
							{{ blx.localization.localeName(language) }}
						</label></div>
					{% endfor %}
				</div></div>
			</div>
		</div>

		<div class="buttons">
			<input class="btn submit" type="submit" value="{{ 'Save'|t }}">
			<a class="btn" href="{{ url('settings') }}">{{ "Cancel"|t }}</a>
		</div>
	</form>
{% endset %}
