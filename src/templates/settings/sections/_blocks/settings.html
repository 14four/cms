<!-- BLOCKS ONLY -->
<!-- TARGET: blocks/app/templates/settings/blog/_blocksettings.html -->
<!-- end BLOCKS ONLY -->
{% extends "_layouts/cp" %}

<!-- BLOCKSPRO ONLY -->
{% set section = blx.content.getSectionById(sectionId) %}
{% if not section %}{% exit 404 %}{% endif %}
<!-- end BLOCKSPRO ONLY -->


{% if not block and blockId %}
	{% set block = blx.content.getEntryBlockById(blockId) %}
	{% if not block %}{% exit 404 %}{% endif %}
{% endif %}


{% if block.id %}
	{% set title = "{name} Settings"|t({ name: '<i>'~block.name|t~'</i>' }) %}
{% else %}
	{% set title = "Create a new entry block"|t %}
{% endif %}


{% set titlebar %}
	<h1>{{ title|raw }}</h1>
	<ul class="left">
		<!-- BLOCKS ONLY -->
		<li><a href="{{ url('settings/blog') }}" class="backbtn">{{ "Blog"|t }}</a></li>
		<!-- end BLOCKS ONLY -->
		<!-- BLOCKSPRO ONLY -->
		<li><a href="{{ url('settings/sections/' ~ section.id ~ '/blocks') }}" class="backbtn">{{ "{section} Entry Blocks"|t({ section: '<i>'~section.name|t~'</i>' })|raw }}</a></li>
		<!-- end BLOCKSPRO ONLY -->
	</ul>
{% endset %}


{% set content %}
	<form method="post" action="" class="centered">
		<input type="hidden" name="action" value="entryBlocks/saveBlock">
		<!-- BLOCKS ONLY -->
		<input type="hidden" name="redirect" value="settings/blog">
		<!-- end BLOCKS ONLY -->
		<!-- BLOCKSPRO ONLY -->
		<input type="hidden" name="redirect" value="settings/sections/{{ section.id }}/blocks">
		<input type="hidden" name="sectionId" value="{{ section.id }}">
		<!-- end BLOCKSPRO ONLY -->
		{% if block.id %}<input type="hidden" name="blockId" value="{{ block.id }}">{% endif %}

		<!-- BLOCKS ONLY -->
		{% include "_includes/blocksettings" with { block: block } only %}
		<!-- end BLOCKS ONLY -->
		<!-- BLOCKSPRO ONLY -->
		{% include "_includes/blocksettings" with { block: block, canBeRequired: true, canBeTranslatable: true } only %}
		<!-- end BLOCKSPRO ONLY -->

		<div class="buttons">
			<input type="submit" class="btn submit" value="{{ 'Save'|t }}">
		</div>
	</form>
{% endset %}
