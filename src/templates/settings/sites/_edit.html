{layout "settings/_layouts/settings" pageTitle="Edit Site"}


{if !site && siteId}
	{set site = sites.getSiteById(siteId)}
{/if}


{region "main"}
	<div class="toolbar">
		{include "_includes/back_btn" label="Sites" uri="settings/sites"}
	</div>

	{if site.id}
		<h2>{if site.name}<strong>{:site.name}</strong>{else}Untitled{/if} site settings</h2>
	{else}
		<h2>Create a new site</h2>
	{/if}

	<form method="post" action="">
		<input type="hidden" name="action" value="sites/save" />
		<input type="hidden" name="redirect" value="settings/sites" />
		{if site.id}<input type="hidden" name="site_id" value="{:site.id}">{/if}

		<div class="pane">
			<div class="pane-body">
				<div class="pane-item field">
					<label for="name">Site Name</label>
					<div class="textwrapper"><input id="name" name="name" class="text {if site.errors.name}error{/if}" type="text" value="{:site.name}" /></div>
					{if site.errors.name}
						{include "_includes/error_list" errors=site.errors.name}
					{/if}
				</div>
				<div class="pane-item field">
					<label for="handle">Site Handle</label>
					<p>This is how you’ll refer to your site in the templates.
						{if site.id}<br/><strong>Note:</strong> If you change this, you’ll need to rename your site’s template folder to match it.{/if}
					</p>
					<div class="textwrapper"><input id="handle" name="handle" class="text code {if site.errors.handle}error{/if}" type="text" value="{:site.handle}" /></div>
					{if site.errors.handle}
						{include "_includes/error_list" errors=site.errors.handle}
					{/if}
				</div>
				<div class="pane-item field">
					<label for="url">Site URL</label>
					<div class="textwrapper"><input id="url" name="url" class="text {if site.errors.url}error{/if}" type="text" value="{:site.url}" /></div>
					{if site.errors.url}
						{include "_includes/error_list" errors=site.errors.url}
					{/if}
				</div>
				<div class="pane-item field">
					<label for="url">Language</label>
					<div>{include "_includes/language" name="language" value=site.language}</div>
				</div>
			</div>
		</div>

		<input class="btn big submit" type="submit" value="Save Site" />
	</form>
{/region}


{if !site}
	{region "scripts"}
		<script type="text/javascript">
			new b.ui.HandleGenerator('#name', '#handle');
		</script>
	{/region}
{/if}
