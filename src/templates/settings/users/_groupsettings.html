{% extends "_layouts/cp" %}
{% import "_includes/forms" as forms %}


{% if not group and groupId %}
	{% set group = blx.accounts.getUserGroupById(groupId) %}
	{% if not group %}{% exit 404 %}{% endif %}
{% endif %}


{% if group.id %}
	{% set title = "{name} Settings"|t({ name: '<i>'~group.name|t~'</i>' }) %}
{% else %}
	{% set title = "Create a new user group"|t %}
{% endif %}


{% set titlebar %}
	<h1>{{ title|raw }}</h1>
	<ul class="left">
		<li><a href="{{ url('settings/users') }}" class="backbtn">{{ "Users"|t }}</a></li>
	</ul>
{% endset %}


{% set content %}
	<form method="post" action="" class="centered">
		<input type="hidden" name="action" value="userGroups/saveGroup">
		<input type="hidden" name="redirect" value="settings/users">
		{% if group.id %}<input type="hidden" name="groupId" value="{{ group.id }}">{% endif %}

		{{ forms.textField({
			label: "Name"|t,
			id: 'name',
			name: 'name',
			value: group.name,
			errors: group.errors.name,
			first: true,
			required: true,
			translatable: true
		}) }}

		{{ forms.textField({
			label: "Handle"|t,
			id: 'handle',
			name: 'handle',
			value: group.handle,
			errors: group.errors.handle,
			required: true
		}) }}

		<div class="buttons">
			<input type="submit" class="btn submit" value="{{ 'Save'|t }}">
		</div>
	</form>
{% endset %}


{% if not group.handle %}
	{% includeJs "new Blocks.ui.HandleGenerator('#name', '#handle');" %}
{% endif %}
