{% extends "_layouts/cp" %}
{% set title = "Vue Tests" %}
{% import "_includes/forms" as forms %}

{% do view.registerAssetBundle("craft\\web\\assets\\vue\\VueAsset") %}

{% block content %}

    <h2>vue-autosuggest</h2>
    {% verbatim %}
    <div id="app">
        <p>You have selected:
            <template v-if="selected">
                '{{selected}}'
            </template>
        </p>
        <vue-autosuggest :suggestions="filteredOptions" :on-selected="onSelected" :limit="10" :input-props="inputProps"></vue-autosuggest>
    </div>
    {% endverbatim %}
{% endblock %}

{% js %}
var app = new Vue({
    el: '#app',

    data() {
        return {
            selected: '',
            options: [{
                data: ['Alexander', 'Amaretto', 'Americano', 'Apple Martini', 'Apple Schnapps', 'Apricot Brandy', 'B-52', 'Bacardi Cocktail', 'Banana Daiquiri', 'Beer', 'Beer1', 'Beer2', 'Beer3', 'Bellini', 'Black Russian', 'Bloody Mary', 'Blue Curaçao', 'Blue Hawaii', 'Bourbon', 'Brandy', 'Brandy Alexander', 'Brandy Egg Nog', 'Bronx', 'Cachaça', 'Caipirinha', 'Campari', 'Champagne', 'Champagne', 'Champagne Cooler', 'ChampagneWithStrawberry', 'Cherry Brandy', 'Christmas Cocktail', 'Club Soda', 'Coconut Cream', 'Cognac', 'Cointreau', 'Coke', 'Cosmopolitan', 'Cosmopolitan', 'Cranberry Juice', 'Cream', 'Crème de Cacao', 'Crème de Cassis', 'Crème de Yvette', 'Cuba Libre', 'Daiquiri', 'Demerara Rum', 'Drambuie', 'Dry Vermouth', 'Egg Yolk', 'Espresso', 'Espresso Martini', 'EspressoMartini1', 'EspressoMartini2', 'French Connection', 'Galliano Liqueur', 'Gibson', 'Gimlet', 'Gin', 'Gin and Tonic', 'Gin Fizz', 'Gin Rickey', 'GinAndTonic1', 'GinAndTonic2', 'GinAndTonic3', 'Ginger Ale', 'Godfather', 'Godmother', 'Golden Cadillac', 'Gomme Syrup', 'Grand Marnier', 'Grapefruit', 'Green Chartreuse', 'Grenadine', 'Harvey Wallbanger', 'Ice Pick', 'Iced Tea', 'Irish Whiskey', 'Japanese Slipper', 'John Collins', 'Kahlúa', 'Kamikaze', 'Kir', 'Kir Royale', 'Kirsch', 'Lemon Juice', 'Lime Juice', 'Long Island Iced Tea', 'Mai Kai Martini', 'MaiKaiMartini1', 'MaiKaiMartini2', 'Manhattan', 'Margarita', 'Martini', 'Midori', 'Midori Splice', 'Milk', 'Mimosa', 'Mojito', 'Mojito', 'Negroni', 'Orange Juice', 'Passion Fruit Juice', 'Peach Brandy', 'Peach Puree', 'Pineapple Juice', 'Piña Colada', 'Port', 'Porto Flip', 'Red Wine', 'Rob Roy', 'Rusty Nail', 'Salty Dog', 'Scotch', 'Screwdriver', 'Sex on the Beach', 'Shots', 'Simple Syrup', 'Singapore Sling', 'Sloe Gin', 'Sweet & Sour Mix', 'Sweet Vermouth', 'TahoeDrink', 'Tequila', 'Tequila', 'Tequila Sunrise', 'Tomato Juice', 'Tonic Water', 'Triple Sec', 'Vodka', 'Vodka', 'Vodka Citron', 'VodkaMidoriSplice', 'Water', 'Whiskey', 'Whiskey Sour', 'Whiskey1', 'Whiskey2', 'WhiskeySour1', 'WhiskeySour2', 'White Rum', 'White Russian', 'White Wine', 'Wine1', 'Wine2', 'Yellow Chartreuse']
            }],
            filteredOptions: [],
            inputProps: {
                id: "autosuggest__input",
                class: "text fullwidth",
                onInputChange: this.onInputChange,
                placeholder: "Type something…"
            },
            limit: 10
        };
    },

    methods: {
        onSelected(option) {
            this.selected = option.item;
        },
        onInputChange(text) {
            if (text === '' || text === undefined) {
                return;
            }

            /* Full control over filtering. Maybe fetch from API?! Up to you!!! */
            const filteredData = this.options[0].data.filter(item => {
                return item.toLowerCase().indexOf(text.toLowerCase()) > -1;
            }).slice(0, this.limit);

            this.filteredOptions = [{
                data: filteredData
            }];
        }
    }
})
{% endjs %}
