{% set title = "Administration" %}
{% extends "users/_layouts/edit" %}


{% if not user and userId %}
	{% set user = blx.users.getById(userId) %}
{% endif %}


{% block settings %}
	<h2>Administration</h2>

	<form method="post" action="">
		<input type="hidden" name="action" value="users/saveAdminSettings">
		<input type="hidden" name="user_id" value="{{ user.id }}">

		<div class="field">
			<div class="heading">
				<h3>Admin Account</h3>
			</div>
			<div class="checkbox"><label>
				<input type="checkbox" name="admin" value="y" {% if user.admin %}checked{% endif %}>
				This is an admin account
			</label></div>
		</div>

		<input type="submit" class="btn submit" value="Save">
	</form>

	<hr>

	<form method="post" action="">
		<input type="hidden" name="user_id" value="{{ user.id }}">

		<div class="field">
			<div class="heading">
				<h3>Account Status</h3>
			</div>

			{% if user.status == 'pending' %}

				<div class="status"></div> Pending Verification  
				<input type="button" class="btn formsubmit" value="Send Verification Email" data-action="users/sendVerificationEmail">
				<input type="button" class="btn formsubmit" value="Activate" data-action="users/activateUser">

			{% elseif user.status == 'locked' %}

				<div class="status pending"></div> {% if blx.config.failedPasswordMode == 'cooldown' %}Temporarily{% endif %} Locked  
				<input type="button" class="btn formsubmit" value="Unlock" data-action="users/unlockUser">

			{% elseif user.status == 'suspended' %}

				<div class="status off"></div> Suspended  
				<input type="submit" class="btn formsubmit" value="Unsuspend" data-action="users/unsuspendUser">

			{% else %}

				<div class="status on"></div> Active

			{% endif %}
		</div>

		{% if not user.isCurrent %}
			<div class="field">
				<h3>Account Actions</h3>

				{% if user.status != 'suspended' %}
					<input type="button" class="btn formsubmit" value="Suspend" data-action="users/suspendUser">
				{% endif %}

				<input class="btn" type="submit" name="delete" value="Delete" data-action="users/deleteUser">
			</div>
		{% endif %}
	</form>
{% endblock %}
