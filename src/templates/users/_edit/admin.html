{% extends "users/_layouts/edit" %}
{% set pageTitle = "Administration"|t %}


{% if not user and userId %}
	{% set user = blx.accounts.getById(userId) %}
{% endif %}


{% set settings %}
	<h2>{{ pageTitle }}</h2>

	<form method="post" action="">
		<input type="hidden" name="action" value="users/saveAdminSettings">
		<input type="hidden" name="user_id" value="{{ user.id }}">

		<div class="field">
			<div class="checkbox">
				<label>
					<input type="checkbox" name="admin" value="y" {% if user.admin %}checked{% endif %}>
					{{ "This is an admin account"|t }}
				</label>
			</div>
		</div>

		<input type="submit" class="btn submit" value="{{ 'Save'|t }}">
	</form>

	<hr>

	<form method="post" action="">
		<input type="hidden" name="user_id" value="{{ user.id }}">

		<div class="field">
			<div class="heading">
				<h3>{{ "Account Status"|t }}</h3>
			</div>

			{% if user.status == 'pending' %}

				<div class="status"></div> {{ "Pending Verification"|t }}  
				<input type="button" class="btn formsubmit" value="{{ 'Send Verification Email'|t }}" data-action="users/sendVerificationEmail">
				<input type="button" class="btn formsubmit" value="{{ 'Activate'|t }}" data-action="users/activateUser">

			{% elseif user.status == 'locked' %}

				<div class="status pending"></div> {% if blx.config.failedPasswordMode == 'cooldown' %}{{ "Temporarily"|t }}{% endif %} {{ "Locked"|t }}  
				<input type="button" class="btn formsubmit" value="{{ 'Unlock'|t }}" data-action="users/unlockUser">

			{% elseif user.status == 'suspended' %}

				<div class="status off"></div> {{ "Suspended"|t }}  
				<input type="submit" class="btn formsubmit" value="{{ 'Unsuspend'|t }}" data-action="users/unsuspendUser">

			{% else %}

				<div class="status on"></div> {{ "Active"|t }}

			{% endif %}
		</div>

		{% if not user.isCurrent %}
			<div class="field">
				<h3>{{ "Account Actions"|t }}</h3>

				{% if user.status != 'suspended' %}
					<input type="button" class="btn formsubmit" value="{{ 'Suspend'|t }}" data-action="users/suspendUser">
				{% endif %}

				<input class="btn" type="submit" name="delete" value="{{ 'Delete'|t }}" data-action="users/deleteUser">
			</div>
		{% endif %}
	</form>
{% endset %}
