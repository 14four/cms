{if !user && userId}
	{set user = blx.users.getById(userId)}
{/if}


{layout "users/_layouts/edit" title="Administration" user=user}


{region "settings"}

	<h2>Administration</h2>

	<form method="post" action="">

		<div class="field">
			<div class="heading">
				<h3>Admin Account</h3>
			</div>
			<div class="checkbox"><label>
				<input type="checkbox" name="admin" value="y" {if user.admin}checked{/if}>
				This is an admin account
			</label></div>

			{if user.id != blx.users.current.id}
				<div class="checkbox"><label>
					<input type="checkbox" name="password_reset" value="y" {if user.password_reset_required}checked{/if}>
					Require a password reset on next login
				</label></div>
			{/if}
		</div>

		<input type="submit" class="btn submit" value="Save">
	</form>

	<hr>

	<div class="field">
		<div class="heading">
			<h3>Account Status</h3>
		</div>

		{if user.status == 'pending'}

			<div class="status"></div> Pending Verification  
			<input class="btn" type="submit" name="validationEmail" value="Send Verification Email">
			<input class="btn" type="submit" name="activate" value="Activate">

		{elseif user.status == 'locked'}

			<div class="status pending"></div> {if blx.config.failedPasswordMode == 'cooldown'}Temporarily{/if} Locked  
			<input class="btn" type="submit" name="unlock" value="Unlock">

		{elseif user.status == 'suspended'}

			<div class="status off"></div> Suspended
			<input class="btn" type="submit" name="unsuspend" value="Unsuspend">

		{else}

			<div class="status on"></div> Active

		{/if}
	</div>


	<div class="field">
		<h3>Account Actions</h3>

		{if user.status != 'suspended'}
			<input class="btn" type="submit" name="suspend" value="Suspend">
		{/if}

		<input class="btn" type="submit" name="delete" value="Delete">
	</div>

{/region}
