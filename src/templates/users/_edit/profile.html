{% extends "users/_edit/layout" %}
{% set selectedTab = 'profile' %}
{% import "_includes/forms" as forms %}
{% includeTranslations
	"Are you sure you want to delete this photo?"
%}


{% if account is not defined %}
	{% if blx.request.segment(1) == 'myaccount' %}
		{% set account = user %}
	{% elseif userId %}
		{% set account = blx.users.status('*').id(userId).first %}
	{% endif %}
	{% if not account %}{% exit 404 %}{% endif %}
{% endif %}


{% set content %}

	{% includeJsResource "lib/imgareaselect/jquery.imgareaselect.pack.js" %}
    {% includeJsResource "js/profile.js" %}
    {% includeCssResource "lib/imgareaselect/imgareaselect-animated.css" %}
    {% includeCssResource "css/profile.css" %}

	{% set photoInput %}
		{% include 'users/_edit/_userphoto' with {account: account} only %}
	{% endset %}

	{{ forms.field({
		label: "Photo"|t
	}, photoInput) }}

	<hr>

	<form method="post" action="" accept-charset="UTF-8">
		<input type="hidden" name="action" value="users/saveProfile">
		<input type="hidden" name="userId" value="{{ account.id }}">

		{% set userFields = blx.systemSettings.userFields %}
		{% include "_includes/fields" with {
			fields: blx.fields.getLayoutByType('User').getFields(),
			entry: account
		} only %}

		<input type="submit" class="btn submit" value="{{ 'Save'|t }}">

	</form>


{% endset %}
