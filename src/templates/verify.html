{% extends "_layouts/base" %}
{% set title = "Verify Account"|t %}
{% import "_includes/forms" as forms %}

{% set verificationCode = blx.request.query('code') %}
{% set user = blx.account.getUserByVerificationCode(verificationCode) %}
{% if not user %}{% exit 404 %}{% endif %}


{% set body %}
	<div class="lockedup">
		<div class="pane">
			<form method="post" action="">
				{{ forms.passwordField({
					id: 'newPassword',
					label: "Choose a new password"|t,
					name: 'newPassword',
					errors: (errors is defined ? errors : null)
				}) }}

				<input type="hidden" name="action" value="account/resetPassword">
				<input type="hidden" name="redirect" value="dashboard">
				<input type="hidden" name="verificationCode" value="{{ verificationCode }}">

				<div class="buttons">
					<input class="btn submit" type="submit" value="{{ 'Reset Password'|t }}">
				</div>
			</form>
		</div>
	</div>
{% endset %}
