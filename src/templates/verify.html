{% extends "_layouts/message" %}
{% set title = "Verify Account"|t %}
{% import "_includes/forms" as forms %}

{% set verificationCode = blx.request.getQuery('code') %}
{% set user = blx.account.getUserByVerificationCode(verificationCode) %}
{% if not user %}{% exit 404 %}{% endif %}


{% set content %}
	<form method="post" action="" accept-charset="UTF-8">
		{{ forms.passwordField({
			id: 'newPassword',
			label: "Choose a new password"|t,
			name: 'newPassword',
			errors: (errors is defined ? errors : null)
		}) }}

		<input type="hidden" name="action" value="account/resetPassword">
		<input type="hidden" name="redirect" value="dashboard">
		<input type="hidden" name="verificationCode" value="{{ verificationCode }}">

		<div class="buttons">
			<input class="btn submit" type="submit" value="{{ 'Reset Password'|t }}">
		</div>
	</form>
{% endset %}
