{"version":3,"sources":["AssetImageEditor.js"],"names":["Craft","AssetImageEditor","Garnish","Modal","extend","$body","$footer","$imageTools","$buttons","$cancelBtn","$replaceBtn","$saveBtn","$editorContainer","$straighten","$croppingCanvas","$spinnerCanvas","canvas","image","viewport","focalPoint","grid","croppingCanvas","clipper","croppingRectangle","cropperHandles","cropperGrid","croppingShade","imageStraightenAngle","viewportRotation","originalWidth","originalHeight","imageVerticeCoords","zoomRatio","animationInProgress","currentView","assetId","cacheBust","draggingCropper","scalingCropper","draggingFocal","previousMouseX","previousMouseY","shiftKeyHeld","editorHeight","editorWidth","cropperState","scaleFactor","flipData","focalPointState","croppingConstraint","spinnerInterval","renderImage","renderCropper","init","settings","this","Date","now","setSettings","defaults","x","y","$container","$","appendTo","$bod","base","t","allowSavingAsNew","addListener","saveImage","bind","proxy","removeListener","$shade","setMaxImageSize","postActionRequest","browserViewportWidth","$doc","get","documentElement","clientWidth","browserViewportHeight","clientHeight","maxImageSize","Math","max","console","log","loadEditor","data","html","alert","$tabs","$viewsContainer","$views","innerHeight","innerWidth","_showSpinner","updateSizeAndPosition","fabric","StaticCanvas","width","height","enableRetinaScaling","requestAnimationFrame","renderAll","imageUrl","getActionUrl","size","Image","fromURL","imageObject","set","originX","originY","left","top","add","getHeight","getWidth","_setFittedImageVerticeCoordinates","_repositionEditorElements","focalState","imageDimensions","getScaledImageDimensions","offsetX","offsetY","focal","focalData","adjustedX","adjustedY","storeFocalPointState","_createFocalPoint","_createViewport","storeCropperState","_addControlListeners","_handleMouseMove","_handleMouseDown","_handleMouseUp","ev","_hideSpinner","first","trigger","window","css","min-width","min-height","addClass","removeClass","parent","previousEditorDimensions","setDimensions","getZoomToFitRatio","previouslyOccupiedArea","_getBoundingRectangle","_repositionCropper","getZoomToCoverRatio","_repositionImage","_repositionViewport","_repositionFocalPoint","_zoomImage","Rect","fill","globalCompositeOperation","sizeFactor","focalX","focalY","deltaX","deltaY","Group","Circle","radius","strokeWidth","stroke","toggleFocalPoint","remove","dimensions","state","scaledImageDimensions","currentWidth","newWidth","ratio","hasOrientationChanged","imageRatio","editorRatio","min","round","rotateImage","flipImage","straighteningInput","SlideRuleInput","onStart","_showGrid","onChange","slider","straighten","onEnd","_hideGrid","_cleanupFocalPointAfterStraighten","keyCode","SHIFT_KEY","constraintMenu","MenuBtn","onOptionSelect","option","setCroppingConstraint","enforceCroppingConstraint","menu","_handleTabClick","$tab","currentTarget","view","showView","$view","filter","enableSlider","disableSlider","disableCropMode","enableCropMode","zoomFactor","degrees","parseInt","imageZoomRatio","newAngle","angle","viewportProperties","imageProperties","angleInRadians","PI","newDeltaX","cos","sin","newDeltaY","modifiedDeltaX","modifiedDeltaY","temp","animate","duration","animationDuration","onComplete","cleanAngle","parseFloat","_adjustFocalPointByAngle","_resetFocalPointPosition","axis","editorCenter","setValue","properties","scaleY","scaleX","previousAngle","allowDegreeFractions","value","_adjustEditorElementsOnStraighten","newCenterX","newCenterY","angleDelta","currentZoomRatio","adjustmentRatio","cropperCenterX","cropperCenterY","imageVertices","getImageVerticeCoords","rectangle","_getZoomRatioToFitRectangle","_isCenterInside","opacity","object","containingObject","newFocalX","newFocalY","adjustedFocalX","adjustedFocalY","containingVertices","vertex","rectangleVertices","_getRectangleVertices","verticeIndex","length","arePointsInsideRectangle","edge","_getEdgeCrossed","rectangleCenter","distanceFromVertexToEdge","abs","sqrt","pow","distanceFromCenterToEdge","$button","hasClass","append","postData","imageRotation","replace","cropData","zoom","find","end","error","onSave","hide","scaledWidth","scaledHeight","boundingBox","_getImageBoundingBox","scale","vertScale","horiScale","getCombinedZoomRatio","i","strokeOptions","lineCount","gridWidth","gridHeight","xStep","yStep","push","Line","onFadeOut","destroy","show","removeAllListeners","callback","cropperData","_showCropper","_editorModeTransition","_hideCropper","targetZoom","inverseZoomFactor","imageOffsetX","imageOffsetY","document","getElementById","context","getContext","start","lines","cW","cH","draw","rotation","save","clearRect","translate","rotate","beginPath","moveTo","lineTo","lineWidth","strokeStyle","restore","setInterval","clearInterval","clipperData","_setupCropperLayer","_redrawCropperElements","backgroundColor","hoverCursor","selection","position","rectangleRatio","rectWidth","rectHeight","lineOptions","gridOptions","pathGroup","Path","previousImageArea","currentOffset","currentArea","areaFactor","coordinateSet","a","b","c","d","_isMouseOver","move","handle","_cropperHandleHitTest","pageX","pageY","_handleFocalDrag","_handleCropperDrag","_handleCropperResize","_setMouseCursor","vertices","newX","newY","constraint","previousHeight","previousWidth","topDelta","leftDelta","change","match","cursor","parentOffset","offset","mouseX","mouseY","lb","rb","tb","bb","event","topLeft","topRight","bottomRight","bottomLeft","zoomMode","topVerticalSegment","bottomVerticalSegment","rightHorizontalSegment","leftHorizontalSegment","verticalOffset","horizontalOffset","_debug","fabricObj","debugger","points","ab","_getVector","bc","scalarAbAb","_getScalarProduct","scalarBcBc","point","ap","bp","scalarAbAp","scalarBcBp","projectsOnAB","projectsOnBC","_getVectorMagnitude","vector","_getAngleBetweenVectors","acos","edgePoints","centerPoint","smallestDiff","edgeCrossed","edgeIndex","toCenter","edgeVector","toVertex","diff","box","proportion","noop"],"mappings":"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","file":"AssetImageEditor.min.js"}