{"version":3,"sources":["AssetImageEditor.js"],"names":["Craft","AssetImageEditor","Garnish","Modal","extend","$body","$footer","$imageTools","$buttons","$cancelBtn","$replaceBtn","$saveBtn","$editorContainer","$straighten","$croppingCanvas","$spinnerCanvas","canvas","image","viewport","focalPoint","grid","croppingCanvas","clipper","croppingRectangle","cropperHandles","cropperGrid","croppingShade","imageStraightenAngle","viewportRotation","originalWidth","originalHeight","imageVerticeCoords","zoomRatio","animationInProgress","currentView","assetId","cacheBust","draggingCropper","scalingCropper","draggingFocal","previousMouseX","previousMouseY","shiftKeyHeld","editorHeight","editorWidth","cropperState","scaleFactor","flipData","focalPointState","croppingConstraint","spinnerInterval","renderImage","renderCropper","init","settings","this","Date","now","setSettings","defaults","x","y","$container","$","appendTo","$bod","base","t","allowSavingAsNew","addListener","saveImage","bind","proxy","removeListener","$shade","setMaxImageSize","postActionRequest","browserViewportWidth","$doc","get","documentElement","clientWidth","browserViewportHeight","clientHeight","maxImageSize","Math","max","window","devicePixelRatio","console","log","loadEditor","data","html","alert","$tabs","$viewsContainer","$views","innerHeight","innerWidth","_showSpinner","updateSizeAndPosition","fabric","StaticCanvas","width","height","enableRetinaScaling","requestAnimationFrame","renderAll","imageUrl","getActionUrl","size","Image","fromURL","imageObject","set","originX","originY","left","top","add","getHeight","getWidth","_setFittedImageVerticeCoordinates","_repositionEditorElements","focalState","imageDimensions","getScaledImageDimensions","offsetX","offsetY","focal","focalData","adjustedX","adjustedY","storeFocalPointState","_createFocalPoint","_createViewport","storeCropperState","_addControlListeners","_handleMouseMove","_handleMouseDown","_handleMouseUp","ev","_hideSpinner","first","trigger","css","min-width","min-height","addClass","removeClass","parent","previousEditorDimensions","setDimensions","getZoomToFitRatio","previouslyOccupiedArea","_getBoundingRectangle","_repositionCropper","getZoomToCoverRatio","_repositionImage","_repositionViewport","_repositionFocalPoint","_zoomImage","Rect","fill","globalCompositeOperation","sizeFactor","focalX","focalY","deltaX","deltaY","Group","Circle","radius","strokeWidth","stroke","toggleFocalPoint","remove","dimensions","state","scaledImageDimensions","currentWidth","newWidth","ratio","hasOrientationChanged","imageRatio","editorRatio","min","round","rotateImage","flipImage","straighteningInput","SlideRuleInput","onStart","_showGrid","onChange","slider","straighten","onEnd","_hideGrid","_cleanupFocalPointAfterStraighten","keyCode","SHIFT_KEY","constraintMenu","MenuBtn","onOptionSelect","option","setCroppingConstraint","enforceCroppingConstraint","menu","_handleTabClick","$tab","currentTarget","view","showView","$view","filter","enableSlider","disableSlider","disableCropMode","enableCropMode","zoomFactor","degrees","parseInt","imageZoomRatio","newAngle","angle","viewportProperties","imageProperties","angleInRadians","PI","newDeltaX","cos","sin","newDeltaY","modifiedDeltaX","modifiedDeltaY","temp","animate","duration","animationDuration","onComplete","cleanAngle","parseFloat","_adjustFocalPointByAngle","_resetFocalPointPosition","axis","editorCenter","setValue","properties","scaleY","scaleX","previousAngle","allowDegreeFractions","value","_adjustEditorElementsOnStraighten","newCenterX","newCenterY","angleDelta","currentZoomRatio","adjustmentRatio","cropperCenterX","cropperCenterY","imageVertices","getImageVerticeCoords","rectangle","_getZoomRatioToFitRectangle","_isCenterInside","opacity","object","containingObject","newFocalX","newFocalY","adjustedFocalX","adjustedFocalY","containingVertices","vertex","rectangleVertices","_getRectangleVertices","verticeIndex","length","arePointsInsideRectangle","edge","_getEdgeCrossed","rectangleCenter","distanceFromVertexToEdge","abs","sqrt","pow","distanceFromCenterToEdge","$button","hasClass","append","postData","imageRotation","replace","cropData","zoom","find","end","error","onSave","hide","scaledWidth","scaledHeight","boundingBox","_getImageBoundingBox","scale","vertScale","horiScale","getCombinedZoomRatio","i","strokeOptions","lineCount","gridWidth","gridHeight","xStep","yStep","push","Line","onFadeOut","destroy","show","removeAllListeners","callback","cropperData","_showCropper","_editorModeTransition","_hideCropper","targetZoom","inverseZoomFactor","imageOffsetX","imageOffsetY","document","getElementById","context","getContext","start","lines","cW","cH","draw","rotation","save","clearRect","translate","rotate","beginPath","moveTo","lineTo","lineWidth","strokeStyle","restore","setInterval","clearInterval","clipperData","_setupCropperLayer","_redrawCropperElements","backgroundColor","hoverCursor","selection","position","rectangleRatio","rectWidth","rectHeight","lineOptions","gridOptions","pathGroup","Path","previousImageArea","currentOffset","currentArea","areaFactor","coordinateSet","a","b","c","d","_isMouseOver","move","handle","_cropperHandleHitTest","pageX","pageY","_handleFocalDrag","_handleCropperDrag","_handleCropperResize","_setMouseCursor","vertices","newX","newY","constraint","previousHeight","previousWidth","topDelta","leftDelta","change","match","cursor","parentOffset","offset","mouseX","mouseY","lb","rb","tb","bb","event","topLeft","topRight","bottomRight","bottomLeft","zoomMode","topVerticalSegment","bottomVerticalSegment","rightHorizontalSegment","leftHorizontalSegment","verticalOffset","horizontalOffset","_debug","fabricObj","debugger","points","ab","_getVector","bc","scalarAbAb","_getScalarProduct","scalarBcBc","point","ap","bp","scalarAbAp","scalarBcBp","projectsOnAB","projectsOnBC","_getVectorMagnitude","vector","_getAngleBetweenVectors","acos","edgePoints","centerPoint","smallestDiff","edgeCrossed","edgeIndex","toCenter","edgeVector","toVertex","diff","box","proportion","noop"],"mappings":"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","file":"AssetImageEditor.min.js"}